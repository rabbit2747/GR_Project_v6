# Security Zone (보안 존) 개요

## 📋 문서 정보

| 속성 | 값 |
|------|-----|
| **문서명** | Security Zone 개요 |
| **차원** | 차원 2 (Security Zone) |
| **버전** | v2.0.0 |
| **최종 수정일** | 2025-01-20 |
| **v2.0 변경사항** | Zone 0 세분화 (0-A/0-B), 7-Zone Model |

---

## 🎯 정의

Security Zone은 **동일한 보안 요구사항을 가진 네트워크 및 시스템 자원의 논리적 그룹**입니다.

**핵심 개념**:
- **보안 경계**: 각 Zone은 명확한 보안 경계를 가짐
- **신뢰 수준**: Zone별로 차등화된 신뢰 수준 적용
- **접근 통제**: Zone 간 트래픽은 명시적 규칙으로 제어
- **정책 일관성**: 동일 Zone 내 모든 자원은 동일한 보안 정책 적용

---

## 🏗️ Zone 구조 (v2.0)

### Zone 계층 (7-Zone Model)

```
┌─────────────────────────────────────────────────────┐
│                   Zone 0-A                          │
│            (Untrusted External Zone)                │
│       일반 인터넷 사용자, 공격자, 봇넷, 크롤러             │
│             (완전 비신뢰 영역 - 0%)                    │
└─────────────────────────────────────────────────────┘
                         ↕️
┌─────────────────────────────────────────────────────┐
│                   Zone 0-B                          │
│            (Trusted Partner Zone)                   │
│      신뢰할 수 있는 외부 서비스 (SaaS, LLM API 등)        │
│           (제한적 신뢰 영역 - 10%)                      │
└─────────────────────────────────────────────────────┘
                         ↕️
┌─────────────────────────────────────────────────────┐
│                    Zone 1                           │
│                (Perimeter Zone)                     │
│      외부(Zone 0)와 내부 네트워크의 경계 (방어선)         │
│                  (낮은 신뢰 - 20%)                     │
└─────────────────────────────────────────────────────┘
                         ↕️
┌─────────────────────────────────────────────────────┐
│                    Zone 2                           │
│               (Application Zone)                    │
│              비즈니스 로직 실행 영역                     │
│                 (중간 신뢰 - 40%)                      │
└─────────────────────────────────────────────────────┘
                         ↕️
┌─────────────────────────────────────────────────────┐
│                    Zone 3                           │
│                  (Data Zone)                        │
│            민감한 데이터 저장 및 처리                    │
│                  (높은 신뢰 - 60%)                     │
└─────────────────────────────────────────────────────┘
                         ↕️
┌─────────────────────────────────────────────────────┐
│                    Zone 4                           │
│               (Management Zone)                     │
│          통제 및 모니터링의 중앙 허브                    │
│                (매우 높은 신뢰 - 80%)                   │
└─────────────────────────────────────────────────────┘
                         ↕️
┌─────────────────────────────────────────────────────┐
│                    Zone 5                           │
│                (Endpoint Zone)                      │
│          최종 사용자 및 디바이스 영역                    │
│               (가변 신뢰 - 50%)                        │
└─────────────────────────────────────────────────────┘
```

---

## 📊 Zone별 특성 비교 (v2.0)

| Zone | 신뢰 수준 | 공격 노출도 | 주요 자산 | 접근 제어 |
|------|----------|-----------|---------|----------|
| **Zone 0-A** | None (0%) | N/A | 일반 인터넷 사용자, 공격자, 봇넷 | 우리가 통제 불가 |
| **Zone 0-B** | Very Low (10%) | N/A | 외부 SaaS, LLM API, Payment Gateway | 계약 기반 신뢰 |
| **Zone 1** | Low (20%) | Highest | WAF, Load Balancer, CDN | 공개 + 엄격한 검증 |
| **Zone 2** | Medium (40%) | Medium | API Server, App Server | 인증된 트래픽만 |
| **Zone 3** | High (60%) | Low | Database, 데이터 저장소 | 최소 권한 원칙 |
| **Zone 4** | Very High (80%) | Lowest | 관리 시스템, SIEM, IAM | 극도로 제한적 |
| **Zone 5** | Variable (50%) | High | 사용자 디바이스, 브라우저 | Zero Trust |

---

## 🆕 Zone 0 세분화 (v2.0 주요 변경)

### v1.0 vs. v2.0 비교

```yaml
v1.0 (6-Zone Model):
  Zone 0: External/Internet Zone
    - 모든 외부 요소를 하나로 통합
    - 신뢰 수준: 0%
    - 구성요소: 인터넷 사용자, 외부 SaaS, 공격자

v2.0 (7-Zone Model):
  Zone 0-A: Untrusted External
    - 완전 비신뢰 영역
    - 신뢰 수준: 0%
    - 구성요소: 일반 인터넷 사용자, 공격자, 봇넷

  Zone 0-B: Trusted Partner
    - 제한적 신뢰 영역
    - 신뢰 수준: 10%
    - 구성요소: 외부 SaaS (Salesforce, Slack), LLM API (OpenAI, Claude)
```

### Zone 0 세분화 이유

```yaml
보안 정책 차별화:
  Zone 0-A:
    - 모든 트래픽을 잠재적 위협으로 간주
    - 최대 수준의 필터링 및 Rate Limiting
    - 익명 접근 허용

  Zone 0-B:
    - 계약 기반 신뢰 관계
    - API Key/Token 검증
    - IP Allowlist 적용 가능
    - SLA 및 보안 인증서 보유

위험 관리 개선:
  - 외부 SaaS 장애 시 Zone 0-A와 독립적 대응
  - Trusted Partner의 보안 사고 발생 시 격리 가능
  - 비용 모니터링 및 사용량 추적 용이

규제 준수:
  - 데이터 처리 위치 추적 (Zone 0-B → GDPR, CCPA)
  - 제3자 데이터 공유 투명성
```

---

## 🔐 Zone별 보안 정책

### Zone 0-A (Untrusted External Zone)

```yaml
목적: 조직 외부의 완전 비신뢰 영역 (일반 인터넷)

신뢰 수준: None (0%)
  - 완전 비신뢰 영역
  - 우리가 통제할 수 없는 공간
  - 모든 유입 트래픽은 잠재적 위협으로 간주

구성요소:
  - 인터넷 사용자 (일반 웹 브라우저)
  - 공격자 인프라
  - 봇넷, 크롤러
  - 익명 액세스

특성:
  - 우리가 제어 불가능
  - 익명성 높음
  - 악의적 행위자 존재 가능
  - 대규모 트래픽 발생원

방어 전략:
  - Zone 1에서 철저한 필터링
  - Zero Trust: 모든 요청 검증
  - Rate Limiting, DDoS 방어
  - 위협 인텔리전스 활용
  - IP Reputation 기반 차단

데이터 취급:
  - Zone 0-A로 전송되는 데이터는 암호화 필수
  - 민감 정보 노출 금지
  - 공개 API만 Zone 0-A에 노출
```

### Zone 0-B (Trusted Partner Zone)

```yaml
목적: 신뢰할 수 있는 외부 서비스 제공자

신뢰 수준: Very Low (10%)
  - 계약 기반 제한적 신뢰
  - SLA 및 보안 인증서 보유
  - 정기 보안 감사 필요

구성요소:
  - 외부 SaaS: Salesforce, Office 365, Google Workspace, Slack, Notion
  - Public LLM: OpenAI (GPT-4), Anthropic (Claude), Google (Gemini)
  - Payment Gateway: Stripe, PayPal, Toss Payments
  - CDN: Cloudflare, Fastly, Akamai
  - 외부 인증 제공자: Auth0, Okta

특성:
  - 계약 관계 존재
  - SLA 보장
  - 보안 인증서 (SOC 2, ISO 27001)
  - API 기반 통합

방어 전략:
  - API Key/Token 검증
  - IP Allowlist (선택적)
  - Rate Limiting (per API Key)
  - 사용량 모니터링 및 알람
  - 정기 보안 리뷰

데이터 취급:
  - PII 데이터 전송 시 암호화 필수
  - 데이터 처리 계약 (DPA) 필수
  - 민감 정보 전송 제한
  - 비용 모니터링 (LLM API)

예시:
  Layer 0: External Services
    - OpenAI API (GPT-4) → Zone 0-B
    - Salesforce CRM → Zone 0-B
    - Stripe Payment → Zone 0-B
```

### Zone 1 (Perimeter Zone)

```yaml
목적: Zone 0(외부)와 내부 네트워크 간 첫 번째 방어선

신뢰 수준: Low (20%)
  - Zone 0의 모든 트래픽을 잠재적 위협으로 간주
  - 심층 검사 및 필터링 필수

배치 구성요소:
  - WAF (Web Application Firewall)
  - Load Balancer (L4/L7)
  - Reverse Proxy (NGINX, Apache)
  - CDN (Cloudflare, Akamai)
  - DDoS Protection

네트워크 정책:
  - 인바운드: Zone 0-A/0-B로부터 HTTP/HTTPS만 허용
  - 아웃바운드: Zone 2로만 전달 (검증된 트래픽)
  - Zone 3, 4, 5 직접 접근 차단

인증 정책:
  - API Key/Token 검증
  - Rate Limiting (속도 제한)
  - IP Whitelist/Blacklist
  - DDoS 임계값 설정

로깅 정책:
  - 모든 요청/응답 로깅
  - 로그 보존: 30일
  - 실시간 SIEM 전송

데이터 취급:
  - TLS/SSL 필수
  - 민감 데이터 캐싱 금지
  - 요청 크기 제한
```

### Zone 2 (Application Zone)

```yaml
목적: 비즈니스 로직 실행 및 API 제공

신뢰 수준: Medium (40%)
  - 인증된 트래픽만 허용
  - 애플리케이션 레벨 보안 적용

배치 구성요소:
  - API Server (REST, GraphQL)
  - App Server (Node.js, Java, Python)
  - Message Queue (Kafka, RabbitMQ)
  - Service Mesh (Istio, Linkerd)
  - AI/ML 추론 엔진 (vLLM, LM Studio)

네트워크 정책:
  - 인바운드: Zone 1에서 검증된 트래픽만
  - 아웃바운드: Zone 3 (DB 접근), Zone 1 (응답), Zone 0-B (외부 API 호출)
  - Zone 4: 로그/메트릭 전송만

인증 정책:
  - JWT Token 검증
  - OAuth 2.0 / OIDC
  - Service-to-Service 인증 (mTLS)

로깅 정책:
  - 비즈니스 로직 실행 로그
  - 에러 및 예외 로그
  - 보존: 90일

데이터 취급:
  - 민감 데이터 암호화
  - DB 접근 시 ORM 사용
  - SQL Injection 방어
  - LLM Prompt Injection 방어 (v2.0)
```

### Zone 3 (Data Zone)

```yaml
목적: 민감한 데이터의 저장 및 처리

신뢰 수준: High (60%)
  - 최소 권한 원칙 (Least Privilege)
  - 데이터 암호화 필수

배치 구성요소:
  - Relational Database (PostgreSQL, MySQL)
  - NoSQL Database (MongoDB, Redis)
  - Object Storage (S3, MinIO)
  - Data Warehouse (Snowflake, BigQuery)
  - Vector Database (pgvector, Weaviate, Qdrant) - v2.0

네트워크 정책:
  - 인바운드: Zone 2에서 인증된 연결만
  - 아웃바운드: Zone 4 (로그), Zone 2 (쿼리 응답)
  - Zone 0, 1, 5 직접 접근 절대 차단

인증 정책:
  - Database 계정별 권한 분리
  - 연결 암호화 (TLS/SSL)
  - 쿼리 로깅 및 감사

로깅 정책:
  - 모든 쿼리 로깅
  - 데이터 변경 이력 (Audit Log)
  - 보존: 1년 이상

데이터 취급:
  - 저장 시 암호화 (Encryption at Rest)
  - 전송 시 암호화 (Encryption in Transit)
  - 정기 백업 및 복원 테스트
  - PII 데이터 마스킹
  - Vector 임베딩 보안 (v2.0)
```

### Zone 4 (Management Zone)

```yaml
목적: 시스템 전체의 통제 및 모니터링

신뢰 수준: Very High (80%)
  - 가장 엄격한 접근 통제
  - 다중 인증 (MFA) 필수
  - 모든 접근 로깅 및 감사

배치 구성요소:
  - SIEM (Security Information and Event Management)
  - IAM (Identity and Access Management)
  - Secrets Management (Vault)
  - Monitoring (Prometheus, Grafana)
  - ITSM (ServiceNow, Jira Service Management)

네트워크 정책:
  - 인바운드: Zone 1-3, 5로부터 로그/메트릭 수신만
  - 아웃바운드: Zone 1-3, 5로 정책 배포만
  - 인터넷 접근 (Zone 0-B): 극도로 제한적 (업데이트, 외부 SIEM 연동만)

인증 정책:
  - 다중 인증 (MFA) 필수
  - 특권 계정 관리 (PAM)
  - 세션 타임아웃: 15분

로깅 정책:
  - 모든 접근 기록
  - 로그 보존 기간: 최소 1년
  - 변조 방지 (Immutable Logs)

데이터 취급:
  - 암호화: 저장/전송 모두 필수
  - 백업: 일일 + 격리된 저장소
  - 접근: 최소 권한 원칙
```

### Zone 5 (Endpoint Zone)

```yaml
목적: 최종 사용자 및 디바이스 관리

신뢰 수준: Variable (50% - 사용자별 상이)
  - Zero Trust 접근
  - 지속적 검증 (Continuous Verification)

배치 구성요소:
  - 사용자 브라우저 (Chrome, Safari, Firefox)
  - 모바일 앱 (iOS, Android)
  - IoT 디바이스
  - VPN Client

네트워크 정책:
  - 인바운드: Zone 0, Zone 1을 통한 접근만
  - 아웃바운드: Zone 0-A/0-B (인터넷), Zone 1로 요청
  - 직접 Zone 2, 3, 4 접근 차단

인증 정책:
  - 사용자 인증 (Username/Password, SSO)
  - 디바이스 인증 (Certificate)
  - 다중 인증 (MFA) 권장

로깅 정책:
  - 사용자 활동 로그 (User Activity Log)
  - 디바이스 접근 로그
  - 보존: 180일

데이터 취급:
  - 클라이언트 측 암호화
  - 민감 데이터 로컬 저장 금지
  - HTTPS Only
```

---

## ⚔️ Zone별 위협 모델 (Threat Model per Zone)

각 Zone에 특화된 공격 유형과 위협 시나리오를 정의합니다. 좌표화 시 해당 구성요소가 어떤 위협 환경에 노출되는지 이해하는 데 활용됩니다.

### Zone 0-A 위협 모델

```yaml
주요 위협:
  네트워크 공격:
    - DDoS (Volumetric): SYN Flood, UDP Flood, ICMP Flood
    - DDoS (Protocol): Smurf Attack, Ping of Death
    - DDoS (Application): HTTP Flood, Slowloris, RUDY
    - DNS Amplification / Reflection
    - BGP Hijacking (경로 가로채기)

  웹 공격:
    - SQL Injection (Union, Blind, Time-based)
    - XSS (Stored, Reflected, DOM-based)
    - CSRF (Cross-Site Request Forgery)
    - SSRF (Server-Side Request Forgery)
    - Path Traversal / Directory Traversal
    - Remote Code Execution (RCE)
    - File Upload Vulnerability

  인증 공격:
    - Brute Force (무차별 대입)
    - Credential Stuffing (유출 계정 대입)
    - Password Spraying (하나의 비밀번호로 다수 계정)
    - Session Hijacking (세션 가로채기)

  자동화 공격:
    - Bot/Crawler 악용 (스크래핑, 가격 조작)
    - Vulnerability Scanning (자동 취약점 탐색)
    - Port Scanning (서비스 탐색)
    - Zero-day Exploit 시도

  사회 공학:
    - Phishing (이메일, SMS, 음성)
    - Spear Phishing (표적 공격)
    - Watering Hole (특정 웹사이트 감염)

공격 주체:
  - Script Kiddie: 자동화 도구 활용, 낮은 기술력
  - Organized Crime: 랜섬웨어, 금전 탈취, 조직적 운영
  - Nation-state Actor: APT, 지속적 침투, 높은 기술력
  - Hacktivist: 정치/사회적 목적, DDoS, 데이터 유출
  - Automated Botnet: 감염된 디바이스 네트워크

위협 특성:
  - 대규모: 불특정 다수 대상, 자동화된 공격
  - 지속적: 24/7 중단 없는 스캐닝 및 공격 시도
  - 진화적: 새로운 공격 기법이 가장 먼저 적용되는 영역
  - 비대칭: 공격 비용 매우 낮음 vs 방어 비용 높음
  - 예측 불가: 공격 시점, 규모, 방식 예측 어려움
```

### Zone 0-B 위협 모델

```yaml
주요 위협:
  공급망 공격:
    - SaaS 제공자 인프라 침해 (제3자 통한 내부 침투)
    - 악성 업데이트 배포 (SolarWinds 유형)
    - 의존성 혼동 공격 (Dependency Confusion)
    - SaaS 제공자 내부 악의적 직원

  API 보안:
    - API Key 유출 / 도난 (코드 저장소, 로그 노출)
    - OAuth Token 하이재킹 (토큰 가로채기)
    - API 과다 호출 (비용 폭증, 서비스 과부하)
    - API 엔드포인트 남용 (의도하지 않은 기능 호출)
    - Man-in-the-Middle (SaaS 통신 가로채기)

  데이터 유출:
    - DLP 우회 (외부 서비스를 통한 데이터 외부 전송)
    - Shadow IT (비승인 SaaS 사용으로 데이터 유출)
    - 과도한 권한 부여 (SaaS에 불필요한 데이터 접근 허용)
    - 데이터 주권 위반 (해외 서버 저장으로 규제 위반)

  AI/LLM 특화:
    - Prompt Injection (외부 LLM API를 통한 프롬프트 주입)
    - Training Data Poisoning (학습 데이터 오염)
    - Model Inversion (LLM 응답으로 학습 데이터 추론)
    - 민감 데이터 LLM 프롬프트 포함 (PII가 외부 LLM으로 전송)

  서비스 중단:
    - SaaS 제공자 장애 (단일 장애 지점)
    - API Rate Limit 초과 (서비스 차단)
    - 계약 종료 / 가격 변경 (비즈니스 연속성 위험)

위협 특성:
  - 신뢰 기반: 기존 신뢰 관계를 악용하므로 탐지가 어려움
  - 간접적: 우리 인프라가 아닌 제3자를 통한 공격
  - 연쇄적: SaaS 침해 → 내부 데이터 노출 → 2차 피해 연쇄
  - 비가시적: 외부 서비스 내부의 보안 상태를 직접 확인 불가
  - 비용 위험: API 과다 호출, 서비스 종료 등 재정적 위험 포함
```

### Zone 1 위협 모델

```yaml
주요 위협:
  네트워크 계층:
    - DDoS 공격 (Z1이 1차 흡수 지점)
    - SSL/TLS 공격 (BEAST, POODLE, Heartbleed 유형)
    - 인증서 위조 / 만료
    - DNS Cache Poisoning

  애플리케이션 계층:
    - OWASP Top 10 전체 (WAF 우회 시도)
    - WAF 규칙 우회 (인코딩, 난독화)
    - HTTP Request Smuggling
    - HTTP Desync Attack
    - Cache Poisoning (CDN/Proxy 캐시 오염)

  인프라:
    - Load Balancer 설정 오류 (내부 서버 직접 노출)
    - SSL 인증서 관리 실패 (만료, 취약 키)
    - 잘못된 CORS 설정 (Cross-Origin 접근 허용)
    - 불필요한 포트/서비스 노출

위협 특성:
  - 최고 노출: 인터넷에 직접 노출되는 유일한 내부 Zone
  - 집중 공격: 모든 외부 공격이 반드시 통과하는 지점
  - 실시간 대응 필요: 공격 탐지 → 차단까지 밀리초 단위
  - 가용성 위협: DDoS로 인한 서비스 전체 중단 가능
```

### Zone 2 위협 모델

```yaml
주요 위협:
  애플리케이션 공격 (Z1 우회 후):
    - SQL Injection (WAF를 우회한 변형)
    - NoSQL Injection (MongoDB, Redis 명령 주입)
    - SSRF (내부 네트워크 탐색, Z3 직접 접근 시도)
    - Business Logic Abuse (비즈니스 로직 악용)
    - Insecure Deserialization (역직렬화 취약점)
    - Mass Assignment (대량 할당 취약점)

  인증/인가:
    - Broken Authentication (인증 우회)
    - Broken Authorization (권한 상승, IDOR)
    - JWT 조작 (서명 위조, 알고리즘 혼동)
    - Session Fixation (세션 고정)
    - Privilege Escalation (수평/수직 권한 상승)

  서비스 간 통신:
    - Service-to-Service 인증 우회
    - API 내부 엔드포인트 노출 (Internal API 외부 접근)
    - Message Queue Poisoning (악성 메시지 주입)
    - 서비스 메시 설정 오류 (mTLS 비활성화)

  AI/ML 특화:
    - Prompt Injection (자체 호스팅 LLM)
    - Model Extraction (모델 가중치 추출)
    - Adversarial Input (적대적 입력으로 오분류 유도)
    - RAG Poisoning (검색 문서 오염)

위협 특성:
  - 2차 방어선: Z1 통과 후의 정교한 공격
  - 비즈니스 영향: 비즈니스 로직 악용으로 직접적 피해
  - 수평 이동: Z2 침해 → Z3(데이터), Z0B(외부 API) 접근 시도
  - 복합적: 여러 취약점 조합 공격 (Chaining)
```

### Zone 3 위협 모델

```yaml
주요 위협:
  데이터 탈취:
    - SQL Injection (Z2에서 전파된)
    - 데이터베이스 직접 접근 시도 (네트워크 설정 오류 시)
    - 백업 데이터 탈취 (암호화되지 않은 백업)
    - 로그에 포함된 민감 데이터 노출
    - 데이터베이스 덤프 유출

  데이터 무결성:
    - 데이터 변조 (금액, 권한, 상태 값 조작)
    - Ransomware (데이터 암호화 후 복호화 몸값 요구)
    - 데이터 삭제 / 파괴 (DROP TABLE, TRUNCATE)
    - 백업 무결성 훼손 (백업도 함께 암호화/삭제)

  접근 통제:
    - 과도한 DB 권한 (불필요한 ADMIN 권한)
    - 공유 DB 계정 사용 (추적 불가)
    - DB 관리 포트 노출 (3306, 5432, 27017 외부 노출)
    - 기본 패스워드 미변경

  AI/ML 데이터:
    - Vector DB에서 원본 데이터 복원 시도 (Embedding Inversion)
    - Training Data 유출 (ML 모델 학습 데이터)
    - 벡터 인덱스 오염 (검색 결과 조작)

위협 특성:
  - 최고 가치 자산: 가장 가치 있는 데이터가 집중된 Zone
  - 간접 공격: Z2를 통해서만 접근 가능하므로 주로 Z2 침해 후 접근
  - 복구 어려움: 데이터 손실/변조 시 복구 비용 매우 높음
  - 규제 위험: 데이터 유출 시 법적 책임 (GDPR 벌금: 매출의 4%)
```

### Zone 4 위협 모델

```yaml
주요 위협:
  권한 악용:
    - Privilege Escalation (관리자 권한 탈취)
    - Credential Theft (관리자 자격 증명 도난)
    - Pass-the-Hash / Pass-the-Ticket (인증 정보 재사용)
    - Golden Ticket Attack (Kerberos)
    - 내부자 위협 (관리자 악의적 행동)

  인프라 조작:
    - Configuration Tampering (보안 설정 변경/비활성화)
    - CI/CD Pipeline Poisoning (빌드 파이프라인 오염)
    - IaC 코드 변조 (Terraform, Ansible 코드 조작)
    - Secrets 유출 (Vault 접근 키 탈취)
    - SIEM 로그 조작/삭제 (증거 인멸)

  공급망:
    - Container Image Poisoning (악성 컨테이너 이미지)
    - 패키지 매니저 공격 (npm, pip 악성 패키지)
    - GitOps 저장소 오염 (악성 커밋)
    - 인프라 코드 백도어 주입

위협 특성:
  - 최고 위험: Z4 침해 = 전체 인프라 통제권 상실
  - 영향 범위: 모든 Zone에 걸쳐 영향 (Z1-Z5 전체)
  - 탐지 어려움: 정상 관리 활동과 악의적 활동 구분 난해
  - APT 표적: 국가 지원 공격자의 주된 목표
  - 신뢰 악용: 높은 권한을 이미 보유한 상태에서의 공격
```

### Zone 5 위협 모델

```yaml
주요 위협:
  사용자 대상:
    - Phishing (이메일, SMS, 음성 피싱)
    - Spear Phishing (표적 피싱, 경영진 대상 BEC)
    - Social Engineering (사회 공학적 기법)
    - Watering Hole (자주 방문하는 웹사이트 감염)

  디바이스 대상:
    - Malware (랜섬웨어, 트로이목마, 키로거)
    - Drive-by Download (웹 브라우징 중 악성코드 다운로드)
    - USB 기반 감염 (BadUSB, Rubber Ducky)
    - 디바이스 분실/도난 (물리적 접근)
    - Jailbreak/Rooting (보안 통제 우회)

  내부 위협:
    - 내부자 위협 (불만 직원, 이직 예정자)
    - 데이터 반출 (USB, 개인 클라우드, 이메일)
    - Shadow IT (비승인 소프트웨어/서비스 사용)
    - BYOD 위험 (개인 디바이스 보안 미비)

  네트워크:
    - 악성 Wi-Fi (Evil Twin, 중간자 공격)
    - VPN 미사용 (공용 네트워크에서 평문 통신)
    - DNS Spoofing (로컬 네트워크)

위협 특성:
  - 최초 침투점: 대부분의 보안 사고가 Z5에서 시작
  - 인적 요소: 기술적 통제만으로는 방어 불가 (보안 교육 필수)
  - 가변적: 사용자 행동에 따라 위험 수준 크게 변동
  - 물리적 위험: 디바이스 분실/도난으로 인한 데이터 노출
  - 연쇄 위험: Z5 감염 → VPN 통한 Z2/Z4 침투 가능
```

### Zone별 위협 심각도 요약

```
| Zone  | 공격 빈도 | 침해 시 영향 | 주요 위협 유형       | 1차 방어 위치 |
|-------|---------|------------|-------------------|------------|
| Z0A   | 최고     | N/A (외부)  | DDoS, 스캐닝, 봇    | Z1         |
| Z0B   | 중간     | 높음       | 공급망, API 악용     | Z2 (아웃바운드)|
| Z1    | 최고     | 높음       | DDoS, OWASP Top10 | Z1 자체     |
| Z2    | 높음     | 매우 높음   | 비즈니스 로직, 주입   | Z2 자체     |
| Z3    | 낮음     | 최고       | 데이터 탈취/파괴     | Z2 (간접)   |
| Z4    | 낮음     | 최고       | 권한 탈취, 인프라 조작 | Z4 자체     |
| Z5    | 높음     | 높음       | 피싱, 멀웨어, 내부자  | Z5 자체     |
```

---

## 🔄 Zone 간 트래픽 흐름 (v2.0)

### 정상적인 요청 흐름

```
인터넷 사용자 (Zone 0-A)
    ↓ HTTPS (공개 인터넷)
CDN/WAF (Zone 1) ← 위협 필터링, Rate Limiting, DDoS 방어
    ↓ 검증된 트래픽
Load Balancer (Zone 1) ← L7 라우팅
    ↓
API Server (Zone 2) ← JWT 검증, 비즈니스 로직
    ↓ SQL Query
Database (Zone 3) ← 최소 권한 쿼리
    ↑ Query Result
API Server (Zone 2)
    ↑ JSON Response
CDN/WAF (Zone 1)
    ↑ HTTPS
인터넷 사용자 (Zone 0-A)

내부 사용자 (Zone 5)
    ↓ HTTPS/VPN
Zone 1 ← 인증 확인
    ↓
Zone 2 ← 비즈니스 로직
    ↓
Zone 3 ← 데이터 접근
```

### AI/ML 워크로드 흐름 (v2.0 신규)

```
사용자 (Zone 5 or Zone 0-A)
    ↓ HTTPS
WAF (Zone 1)
    ↓
API Server (Zone 2) ← LLM 요청 수신
    ↓ Embedding 요청
LLM API (Zone 0-B: OpenAI, Claude)
    ↑ Vector Embedding
API Server (Zone 2)
    ↓ Vector Search
Vector DB (Zone 3: pgvector, Weaviate)
    ↑ 유사 문서 반환
API Server (Zone 2) ← RAG Context 구성
    ↓ LLM 추론 요청
LLM API (Zone 0-B)
    ↑ LLM Response
API Server (Zone 2)
    ↑ HTTPS
사용자
```

### 관리 트래픽 흐름

```
관리자 (Zone 5)
    ↓ MFA 인증
IAM (Zone 4) ← 권한 확인
    ↓ 정책 배포
모든 Zone (1-3, 5) ← 보안 정책 업데이트
    ↑ 로그/메트릭
SIEM (Zone 4) ← 실시간 분석 및 알림
    ↑ 외부 위협 정보
외부 위협 인텔리전스 (Zone 0-B)
```

---

## 🚫 Zone 간 통제 규칙 (v2.0)

### 허용되는 연결

| 출발 Zone | 목적 Zone | 프로토콜 | 용도 |
|----------|----------|---------|------|
| Zone 0-A | Zone 1 | HTTPS | 일반 인터넷 사용자 요청 |
| Zone 0-B | Zone 1 | HTTPS | 외부 SaaS Webhook, CDN |
| Zone 5 | Zone 1 | HTTPS/VPN | 내부 사용자 요청 |
| Zone 1 | Zone 2 | HTTP/HTTPS | 검증된 트래픽 전달 |
| Zone 2 | Zone 3 | TLS | Database 쿼리 |
| Zone 2 | Zone 0-B | HTTPS | 외부 API 호출 (LLM, Payment 등) |
| Zone 1-3, 5 | Zone 4 | Syslog, Metrics | 로그/메트릭 전송 |
| Zone 4 | Zone 1-3, 5 | 정책 API | 보안 정책 배포 |
| Zone 4 | Zone 0-B | HTTPS | 위협 인텔리전스, 업데이트 |

### 절대 차단되는 연결

| 출발 Zone | 목적 Zone | 이유 |
|----------|----------|------|
| Zone 0-A/0-B | Zone 2 | 외부에서 직접 App Server 접근 금지 |
| Zone 0-A/0-B | Zone 3 | 외부에서 직접 Database 접근 금지 |
| Zone 0-A/0-B | Zone 4 | 외부에서 Management Zone 접근 절대 금지 |
| Zone 0-A/0-B | Zone 5 | 외부에서 내부 Endpoint 직접 접근 금지 |
| Zone 5 | Zone 2 | 사용자가 직접 App Server 접근 금지 |
| Zone 5 | Zone 3 | 사용자가 직접 Database 접근 금지 |
| Zone 5 | Zone 4 | 일반 사용자가 Management Zone 접근 금지 (관리자 제외) |
| Zone 1 | Zone 3 | Perimeter에서 직접 Data Zone 접근 금지 |
| Zone 2 | Zone 0-A | Application에서 일반 인터넷으로 직접 접근 금지 |

---

## 🛡️ Zone 경계 통제 상세 (Boundary Controls)

Zone 간 트래픽 허용/차단 테이블은 위에 정의되어 있습니다. 이 섹션은 각 Zone 경계에서 **구체적으로 어떤 통제 메커니즘이 적용되는지**를 상세히 정의합니다.

### 경계 1: Z0A ↔ Z1 (비신뢰 외부 → 경계)

```yaml
통과 조건: 모든 트래픽은 잠재적 위협으로 간주
방향: Z0A → Z1 (인바운드만)

통제 메커니즘:
  Layer 3/4 (네트워크):
    - IP Reputation 필터링 (알려진 악성 IP 차단)
    - Geo-blocking (허용 국가만, 필요시)
    - Rate Limiting per IP (예: 100 req/min)
    - SYN Flood 방어 (SYN Cookie)
    - UDP Flood 방어
    - ICMP 제한 (Ping of Death 방지)

  Layer 7 (애플리케이션):
    - WAF 규칙 적용 (OWASP Top 10)
    - SQL Injection 패턴 차단
    - XSS 페이로드 차단
    - Path Traversal 차단
    - Bot Detection (CAPTCHA, JavaScript Challenge)
    - Request Size 제한 (Body: 10MB 이하)
    - Content-Type 검증

  프로토콜 제한:
    - 허용: HTTPS (443) only
    - 차단: HTTP (80) → HTTPS 리다이렉트
    - 차단: 비표준 포트 전체
    - TLS 최소 버전: 1.2

  로깅:
    - 모든 요청 로그 (IP, URI, User-Agent, 응답코드)
    - 차단된 요청 별도 로그
    - SIEM 실시간 전송 (Zone 4)
```

### 경계 2: Z0B ↔ Z1/Z2 (신뢰 파트너 → 내부)

```yaml
통과 조건: 인증된 API 호출만 허용
방향: 양방향 (Z0B → Z2 인바운드 Webhook, Z2 → Z0B 아웃바운드 API 호출)

인바운드 통제 (Z0B → Z1/Z2, Webhook 수신):
  인증:
    - Webhook Signature 검증 (HMAC-SHA256)
    - IP Allowlist (서비스 제공자 IP 범위만)
    - 전용 Webhook Endpoint만 노출
  검증:
    - Payload 무결성 확인 (Signature)
    - Content-Type 검증 (application/json)
    - Request Size 제한

아웃바운드 통제 (Z2 → Z0B, API 호출):
  인증:
    - API Key / Bearer Token (Vault에서 관리)
    - OAuth 2.0 Client Credentials (서비스 간)
    - mTLS (높은 보안 필요 시)
  데이터 보호:
    - DLP (Data Loss Prevention) 적용
    - PII 데이터 전송 시 암호화 또는 마스킹
    - 민감 데이터 전송 승인 프로세스
  사용량 통제:
    - API 호출량 모니터링 (비용 예측)
    - Rate Limiting per Service
    - 이상 사용량 알람 (예: 평소 대비 300% 초과)
  Outbound Proxy:
    - Forward Proxy 경유 필수
    - 허용된 외부 도메인만 접근 (Allowlist)
    - TLS Inspection (필요 시)

로깅:
  - 모든 API 호출 로그 (서비스명, Endpoint, 응답시간, 비용)
  - 전송 데이터 분류 태그 (PII, Internal, Public)
  - 월간 사용량/비용 리포트 생성
```

### 경계 3: Z1 ↔ Z2 (경계 → 서비스)

```yaml
통과 조건: Z1에서 검증 완료된 트래픽만 전달
방향: Z1 → Z2 (검증된 인바운드)

통제 메커니즘:
  트래픽 전달:
    - WAF 통과 + Rate Limit 통과한 요청만
    - X-Forwarded-For 헤더 추가 (원본 IP 보존)
    - X-Request-ID 헤더 추가 (요청 추적)
    - Proxy Protocol 또는 헤더로 원본 정보 전달

  프로토콜:
    - Z1 → Z2: HTTP 또는 HTTPS (내부 네트워크)
    - 내부 통신 암호화 여부는 보안 정책에 따라 결정
    - mTLS 권장 (Zero Trust 환경)

  라우팅:
    - URL Path 기반 라우팅 (/api → API Server, / → Frontend)
    - Host 기반 라우팅 (api.example.com → API, www → Frontend)
    - Load Balancing (Round Robin, Least Connections)

  헬스 체크:
    - Z2 서버 상태 주기적 확인 (GET /health)
    - 비정상 서버 자동 제외
    - 복구 시 자동 재투입

  차단 조건:
    - Z1에서 Z3 직접 접근 절대 불가 (반드시 Z2를 거쳐야 함)
    - Z1에서 Z4 접근 불가 (로그 전송 제외)
```

### 경계 4: Z2 ↔ Z3 (서비스 → 데이터)

```yaml
통과 조건: 인증된 서비스 계정의 최소 권한 접근만 허용
방향: Z2 → Z3 (쿼리/저장), Z3 → Z2 (응답)

통제 메커니즘:
  인증:
    - 서비스별 전용 DB 계정 (공유 계정 금지)
    - 계정별 최소 권한 (READ only, WRITE only, ADMIN 분리)
    - SSL/TLS 연결 필수 (평문 연결 차단)
    - IP Allowlist (Z2 서브넷만 허용)

  접근 통제:
    - Database Firewall (쿼리 패턴 검증)
    - Connection Pooling (최대 연결 수 제한)
    - 쿼리 타임아웃 설정 (Long Query 방지)
    - DDL 명령 제한 (DROP, ALTER 등은 관리 계정만)

  데이터 보호:
    - 전송 중 암호화 (TLS 1.2+)
    - 저장 중 암호화 (Encryption at Rest)
    - PII 컬럼 레벨 암호화 (AES-256)
    - 데이터 마스킹 (비관리자 조회 시)

  감사:
    - 모든 쿼리 로그 기록 (쿼리문, 실행시간, 반환 행수)
    - 데이터 변경 이력 (INSERT, UPDATE, DELETE)
    - 스키마 변경 이력 (DDL)
    - 비정상 패턴 알림 (대량 조회, 새벽 시간 접근 등)

  성능 보호:
    - Slow Query 탐지 (>1초)
    - Connection Pool 고갈 방지
    - Read Replica 활용 (읽기 부하 분산)
```

### 경계 5: Z4 ↔ 전체 Zone (관리 → 모든 Zone)

```yaml
통과 조건: VPN + MFA 인증된 관리자만
방향: Z4 → 전체 (정책 배포), 전체 → Z4 (로그/메트릭 수신)

아웃바운드 통제 (Z4 → Z1-Z3, Z5, 정책 배포):
  인증:
    - 관리 계정 MFA 필수
    - PAM (Privileged Access Management) 경유
    - 세션 타임아웃: 15분
    - 접근 승인 워크플로 (2인 이상 승인)
  통제:
    - 변경 사항 자동 감사 로그
    - Rollback 가능한 배포만 허용
    - 정책 변경 사전 검토 (Dry-run)
    - 비상시에만 직접 접근 (Break-glass 절차)

인바운드 통제 (전체 → Z4, 로그/메트릭 수신):
  프로토콜:
    - Syslog (UDP/TCP 514, TLS 6514)
    - Prometheus Metrics (HTTP /metrics)
    - SNMP (제한적, 보안 v3만)
  보호:
    - 로그 전송만 허용 (데이터 조회 불가)
    - 로그 무결성 보장 (Immutable Logs)
    - 로그 전송 암호화 (TLS)

Z4 외부 접근 (Z4 → Z0B):
  - 극도로 제한적 (보안 업데이트, 위협 인텔리전스만)
  - Outbound Proxy 경유 필수
  - 허용 도메인 Allowlist
```

### 경계 6: Z5 ↔ Z1/Z2 (엔드포인트 → 서비스)

```yaml
통과 조건: Zero Trust 검증 완료된 디바이스 + 사용자만
방향: Z5 → Z1 (웹 접근), Z5 → Z4 (관리자 접근)

통제 메커니즘:
  사용자 인증:
    - SSO (Single Sign-On)
    - MFA (Multi-Factor Authentication)
    - Conditional Access (위치, 시간, 디바이스 상태 기반)

  디바이스 인증:
    - Device Compliance 확인 (MDM)
    - OS 패치 수준 확인
    - EDR 에이전트 설치 확인
    - 디바이스 인증서 검증
    - Jailbreak/Root 탐지

  접근 경로:
    - 일반 사용자: Z5 → Z1 → Z2 (웹 경유)
    - 관리자: Z5 → VPN → Z4 (VPN + MFA 경유)
    - Z5 → Z3 직접 접근: 절대 불가
    - Z5 → Z2 직접 접근: 불가 (반드시 Z1 경유)

  데이터 보호:
    - DLP 에이전트 (민감 데이터 외부 전송 차단)
    - 클립보드 통제 (VDI 환경)
    - USB 제한 (허용된 디바이스만)
    - 화면 캡처 제한 (높은 보안 등급 시)
```

### 경계 통제 요약 매트릭스

```
| 경계         | 인증 방식              | 암호화   | 핵심 통제          | 로깅 수준 |
|-------------|----------------------|---------|-------------------|---------|
| Z0A → Z1    | 없음 (비신뢰)         | TLS 필수 | WAF, Rate Limit   | 전체    |
| Z0B ↔ Z2    | API Key/OAuth        | TLS 필수 | DLP, Proxy, 비용   | 전체    |
| Z1 → Z2     | 내부 (검증 완료)       | 권장     | 라우팅, 헬스체크     | 요약    |
| Z2 → Z3     | DB 계정 (최소 권한)    | TLS 필수 | DB Firewall, 감사  | 전체    |
| Z4 → 전체    | MFA + PAM            | TLS 필수 | 승인, Rollback     | 전체    |
| Z5 → Z1     | SSO + MFA + MDM      | TLS 필수 | Zero Trust, DLP   | 전체    |
```

---

## 📋 Zone별 배치 패턴

### Very Common (매우 흔함)

**정의**: 해당 Zone에 거의 항상 배치되는 구성요소

| Zone | Very Common 구성요소 |
|------|---------------------|
| **Zone 0-A** | 일반 인터넷 사용자, 공격자, 봇넷 |
| **Zone 0-B** | 외부 SaaS, LLM API, Payment Gateway, CDN |
| **Zone 1** | WAF, Load Balancer |
| **Zone 2** | API Server, App Server, Message Queue |
| **Zone 3** | Relational DB, NoSQL DB, Object Storage |
| **Zone 4** | SIEM, IAM, Monitoring, Secrets Management |
| **Zone 5** | 브라우저, 모바일 앱 |

### Common (흔함)

**정의**: 해당 Zone에 자주 배치되지만 선택적인 구성요소

| Zone | Common 구성요소 |
|------|----------------|
| **Zone 0-A** | 크롤러, 스캐너 |
| **Zone 0-B** | 외부 인증 제공자 (Auth0, Okta), Email Service (SendGrid) |
| **Zone 1** | Reverse Proxy, DDoS Protection |
| **Zone 2** | Service Mesh, API Gateway, Self-hosted LLM |
| **Zone 3** | Cache (Redis), Data Warehouse, Vector DB |
| **Zone 4** | ITSM, Configuration Management |
| **Zone 5** | VPN Client, IoT 디바이스 |

### Rare (드묾)

**정의**: 특수한 경우에만 해당 Zone에 배치되는 구성요소

| Zone | Rare 구성요소 |
|------|--------------|
| **Zone 0-A** | N/A (우리가 배치하지 않음) |
| **Zone 0-B** | 외부 Analytics (Google Analytics) |
| **Zone 1** | Message Queue (보통 Zone 2) |
| **Zone 2** | Database Replica (읽기 전용) |
| **Zone 3** | App Server (특수한 데이터 처리) |
| **Zone 4** | Backup Server (보통 Zone 3) |
| **Zone 5** | Edge Computing Device |

---

## 🔍 Zone 분류 기준 (v2.0 업데이트)

새로운 구성요소를 배치할 때 다음 기준으로 Zone을 결정합니다:

### 1단계: 통제 가능성

```yaml
질문: "이 구성요소를 우리가 통제할 수 있는가?"

통제 불가 (외부):
  → Zone 0-A (Untrusted External)
  예: 일반 인터넷 사용자, 공격자, 봇넷

  → Zone 0-B (Trusted Partner)
  예: 외부 SaaS, LLM API, Payment Gateway
  조건: 계약 관계, SLA, 보안 인증서

통제 가능 (내부):
  → Zone 1-5
  예: 우리가 관리하는 모든 인프라
```

### 2단계: 외부 서비스 신뢰도 평가 (Zone 0-A vs. 0-B)

```yaml
질문: "외부 서비스가 신뢰할 수 있는가?"

Zone 0-B 조건 (모두 충족 필요):
  1. 계약 관계: 명시적 서비스 계약 체결
  2. SLA 보장: 가용성, 성능, 보안 SLA
  3. 보안 인증: SOC 2, ISO 27001 등 보유
  4. 데이터 보호: GDPR, CCPA 준수
  5. API 인증: API Key, OAuth 등 인증 체계

Zone 0-A 해당:
  - 위 조건 미충족
  - 익명 접근
  - 불특정 다수
```

### 3단계: 신뢰 요구사항

```yaml
질문: "이 구성요소가 다루는 데이터의 민감도는?"

Public (공개):
  → Zone 1 (Perimeter)
  예: CDN, WAF

Authenticated (인증된 사용자):
  → Zone 2 (Application)
  예: API Server, App Server

Highly Sensitive (민감):
  → Zone 3 (Data)
  예: Database, Object Storage

Management (관리):
  → Zone 4 (Management)
  예: IAM, SIEM, Monitoring

User-Controlled (사용자):
  → Zone 5 (Endpoint)
  예: 브라우저, 모바일 앱
```

### 4단계: 공격 노출도

```yaml
질문: "이 구성요소가 외부에 노출되는가?"

완전 외부 노출:
  → Zone 0-A/0-B (External)
  예: 인터넷 사용자, 외부 SaaS

인터넷에 직접 노출:
  → Zone 1 (Perimeter)
  예: Load Balancer, WAF

인증된 연결만 수락:
  → Zone 2 (Application)
  예: API Server

내부 전용:
  → Zone 3 (Data)
  예: Database

관리 전용:
  → Zone 4 (Management)
  예: SIEM, IAM
```

---

## 🔍 경계 사례 판단 가이드 (Edge Case Classification)

좌표화에서 가장 어려운 것은 **"이 구성요소가 어느 Zone에 속하는가?"**가 모호한 경우입니다. 아래는 자주 발생하는 경계 사례와 결정론적 판단 기준입니다.

### 원칙: 역할이 Zone을 결정한다

동일한 제품이라도 **수행하는 역할(Archetype)**에 따라 다른 Zone에 배치됩니다. 제품명이 아니라 "이 인스턴스가 실제로 무엇을 하는가"를 기준으로 판단합니다.

### 사례 1: Redis — Z2 vs Z3

```yaml
판단 기준: "영구 데이터를 저장하는가?"

Redis as Cache (Z2, L6):
  역할: 임시 캐시, 세션 캐시, Rate Limiting 카운터
  특성:
    - 데이터 유실 허용 (Eviction 정책 적용)
    - TTL(Time-To-Live) 설정됨
    - DB에서 재생성 가능한 데이터
    - 재시작 시 데이터 손실 감수
  근거: 영구 데이터가 아니므로 Data Zone이 아님 → Z2 (Service Zone)

Redis as Data Store (Z3, L5):
  역할: Primary 데이터 저장소, 세션 영구 저장, 큐 메시지 영구 보관
  특성:
    - AOF/RDB 영속성 활성화
    - 백업 필요
    - 데이터 유실 시 비즈니스 영향 발생
    - Replication 구성
  근거: 영구 데이터를 관리하므로 → Z3 (Data Zone)

결정 질문: "이 Redis 인스턴스의 데이터가 사라지면 비즈니스에 영향이 있는가?"
  - Yes → Z3
  - No → Z2
```

### 사례 2: API Gateway — Z1 vs Z2

```yaml
판단 기준: "외부에 직접 노출되는가?"

API Gateway as Perimeter (Z1, L2):
  역할: 외부 트래픽의 1차 진입점
  특성:
    - 공개 인터넷에서 직접 접근 가능 (Public IP)
    - Rate Limiting, IP 차단 수행
    - SSL/TLS 종료 담당
    - WAF 기능 통합
    - Zone 0-A/0-B로부터 직접 트래픽 수신
  예시: AWS API Gateway (Public), Kong (Public-facing)
  근거: 외부 노출 → Z1

API Gateway as Internal Router (Z2, L2):
  역할: 내부 마이크로서비스 간 라우팅
  특성:
    - 내부 네트워크에서만 접근 가능 (Private IP)
    - 서비스 간 인증 (mTLS)
    - 내부 트래픽 라우팅 및 로드 밸런싱
    - 외부에서 직접 접근 불가
  예시: Kong (Internal), Envoy (Service Mesh 내부)
  근거: 내부 전용 → Z2

결정 질문: "이 API Gateway에 공개 인터넷에서 직접 접근할 수 있는가?"
  - Yes → Z1
  - No → Z2
```

### 사례 3: LLM 서비스 — Z0B vs Z2

```yaml
판단 기준: "우리가 인프라를 관리하는가?"

SaaS LLM (Z0B, L0):
  역할: 외부 LLM API 호출
  특성:
    - 우리가 인프라를 관리하지 않음
    - API Key 기반 접근
    - 계약 기반 신뢰 (SLA, DPA)
    - 데이터가 외부로 전송됨
  예시: OpenAI GPT-4 API, Anthropic Claude API, Google Gemini API
  근거: 외부 관리 서비스 → Z0B

Self-hosted LLM (Z2, L7):
  역할: 자체 운영 LLM 추론 서비스
  특성:
    - 우리가 인프라를 관리함 (GPU 서버)
    - 데이터가 내부에 유지됨
    - 비즈니스 로직의 일부
    - 직접 성능/보안 통제 가능
  예시: vLLM, Ollama, LM Studio (자체 호스팅)
  근거: 내부 관리 + 비즈니스 로직 실행 → Z2

결정 질문: "우리가 이 LLM의 인프라(서버, GPU, 네트워크)를 직접 관리하는가?"
  - Yes → Z2
  - No → Z0B
```

### 사례 4: CDN — Z0B vs Z1

```yaml
판단 기준: "SaaS인가, 자체 관리인가?"

CDN as SaaS (Z0B, L0):
  역할: 외부 CDN 서비스 이용
  특성:
    - 우리가 CDN 인프라를 관리하지 않음
    - SaaS 계약 기반
    - DNS CNAME으로 연결만 설정
    - CDN 제공자가 Edge 서버 운영
  예시: Cloudflare (SaaS 플랜), Fastly, Akamai
  근거: 외부 관리 서비스 → Z0B

CDN/Reverse Proxy as Self-hosted (Z1, L2):
  역할: 자체 운영 캐싱/프록시 서버
  특성:
    - 우리가 직접 서버 운영
    - 외부 트래픽의 1차 진입점
    - NGINX, Varnish 등 자체 배포
    - 인프라 관리 책임 = 우리
  예시: 자체 NGINX Reverse Proxy, 자체 Varnish Cache
  근거: 자체 관리 + 외부 노출 → Z1

결정 질문: "우리가 이 CDN의 서버를 직접 관리하는가?"
  - Yes → Z1
  - No → Z0B

주의: Cloudflare가 WAF 기능도 수행하더라도, SaaS로 이용하면 Z0B입니다.
       동일 기능을 자체 NGINX+ModSecurity로 구현하면 Z1입니다.
       Zone은 기능이 아니라 관리 주체와 노출 위치로 결정합니다.
```

### 사례 5: Elasticsearch — Z2 vs Z3

```yaml
판단 기준: "검색 엔진인가, 데이터 저장소인가?"

Elasticsearch as Search Engine (Z2, L6):
  역할: 실시간 검색 서비스
  특성:
    - 원본 데이터는 Z3의 Primary DB에 존재
    - Elasticsearch는 검색 인덱스(파생 뷰)만 보관
    - 인덱스 재생성 가능 (원본에서)
    - 검색 API를 애플리케이션에 제공
  근거: 파생 데이터 + 서비스 역할 → Z2

Elasticsearch as Primary Store (Z3, L5):
  역할: 로그/이벤트의 Primary 저장소
  특성:
    - 원본 데이터가 Elasticsearch에만 존재
    - 로그 데이터의 유일한 저장소 (SIEM 연동)
    - 데이터 유실 시 복구 불가
    - 백업 필요
  예시: ELK Stack에서 로그의 Primary 저장소로 사용
  근거: 원본 데이터 보관 → Z3

결정 질문: "이 Elasticsearch의 데이터가 다른 곳에서 재생성 가능한가?"
  - Yes → Z2 (파생 뷰)
  - No → Z3 (Primary 저장소)
```

### 사례 6: Vault (Secrets Manager) — Z4 vs Cross-Layer

```yaml
판단 기준: "관리 대상이 특정 Zone인가, 전체 스택인가?"

Vault as Zone-specific (Z4):
  역할: 관리 Zone 내부의 시크릿 관리
  특성:
    - 관리 인프라의 일부
    - Z4 내부 시스템만 접근
    - CI/CD, IaC 등 관리 도구에 시크릿 제공
  근거: 관리 시스템 전용 → Z4

Vault as Cross-Zone (Z4, Cross-Layer):
  역할: 전체 인프라의 시크릿 관리
  특성:
    - 모든 Zone의 시스템이 시크릿 조회
    - Z2(App), Z3(DB), Z4(관리) 등 전 Zone 서비스
    - 전체 인프라에 걸쳐 운영
  근거: Layer는 Cross (전체 스택 관리), Zone은 Z4 (관리 Zone에 물리적 배치)

결정 기준:
  - Zone은 항상 물리적 배치 위치로 결정 → Vault는 Z4에 배치
  - Layer에서 Cross-Layer 여부를 결정 → 여러 Layer에 서비스 제공 시 Cross
  - Zone과 Layer는 독립적 차원이므로 별도로 판단
```

### 사례 7: Message Queue (Kafka, RabbitMQ) — Z2 vs Z3

```yaml
판단 기준: "메시지를 영구 보관하는가?"

Message Queue as Middleware (Z2, L6):
  역할: 서비스 간 비동기 메시지 전달
  특성:
    - 메시지는 소비 후 삭제
    - 일시적 버퍼 역할
    - 서비스 디커플링 목적
    - 메시지 유실 시 재전송 가능
  예시: RabbitMQ (기본), Kafka (짧은 보존)
  근거: 미들웨어 역할 → Z2

Message Queue as Event Store (Z3, L5):
  역할: 이벤트 소싱, 영구 이벤트 로그
  특성:
    - 메시지를 장기 보존 (days~months)
    - 이벤트 리플레이 가능
    - 감사 로그 역할
    - 데이터 유실 시 비즈니스 영향
  예시: Kafka (장기 보존, Event Sourcing)
  근거: 영구 데이터 보관 → Z3

결정 질문: "이 메시지 큐의 데이터를 장기 보존하고 리플레이하는가?"
  - Yes → Z3
  - No → Z2
```

### 사례 8: Monitoring Agent (Datadog, Prometheus) — Z2 vs Z4 vs Cross

```yaml
판단 기준: "모니터링 대상인가, 모니터링 수행자인가?"

Monitoring Agent (각 Zone에 배치):
  역할: 메트릭 수집 에이전트
  특성:
    - 수집 대상 시스템에 설치됨
    - 데이터를 Z4의 모니터링 서버로 전송
    - 각 Zone의 시스템에 경량 에이전트로 배치
  Zone: 설치된 시스템의 Zone을 따름 (Z2의 App Server에 설치 → Z2)
  Layer: Cross-Layer (여러 레이어에 걸쳐 작동)

Monitoring Server (Z4):
  역할: 메트릭 수집/분석/시각화 서버
  특성:
    - Prometheus, Grafana, Datadog 서버
    - 모든 Zone에서 메트릭 수신
    - 관리/운영 목적
  근거: 관리 인프라 → Z4

Monitoring SaaS (Z0B):
  역할: 외부 모니터링 서비스
  특성:
    - 우리가 관리하지 않는 외부 서비스
    - API/Agent로 데이터 전송
  예시: Datadog (SaaS), New Relic (SaaS)
  근거: 외부 관리 서비스 → Z0B

결정 기준:
  - Agent = 설치 위치의 Zone
  - Self-hosted Server = Z4
  - SaaS = Z0B
```

### 판단 흐름 요약 (Decision Tree)

```
새 구성요소 Zone 판단:

1. 우리가 관리하는가?
   ├── No → 계약/SLA 있는가?
   │       ├── Yes → Z0B (Trusted Partner)
   │       └── No  → Z0A (Untrusted External)
   └── Yes → 외부에 직접 노출되는가?
           ├── Yes → Z1 (Perimeter)
           └── No  → 어떤 데이터를 다루는가?
                   ├── 영구/민감 데이터 저장 → Z3 (Data)
                   ├── 관리/운영/모니터링 → Z4 (Management)
                   ├── 사용자 엔드포인트 → Z5 (Endpoint)
                   └── 비즈니스 로직/서비스 → Z2 (Application)

경계 사례 추가 확인:
  - "데이터가 사라지면 비즈니스 영향?" → Yes면 Z3으로 상향
  - "여러 Zone/Layer에 걸쳐 작동?" → Cross-Layer 고려
  - "동일 제품의 다른 역할?" → Archetype별 별도 좌표 할당
```

### 사례 9: Bastion Host / Jump Server — Z1 vs Z4

```yaml
판단 기준: "접근 목적이 무엇인가?"

Bastion Host as Perimeter Entry (Z1, L2):
  역할: 외부에서 내부 네트워크로의 관리 접근 진입점
  특성:
    - 공개 인터넷에 SSH/RDP 포트가 노출됨 (Public IP)
    - 외부 관리자가 VPN 없이 접근하는 1차 진입점
    - 외부에 직접 노출되므로 경계(Perimeter)에 위치
    - AWS EC2 Bastion, Azure Bastion
  근거: 외부에 직접 노출 → Z1

Bastion Host as Management Tool (Z4, L3):
  역할: VPN 내부에서만 접근 가능한 관리 점프 서버
  특성:
    - 공개 인터넷에 노출되지 않음 (Private IP)
    - VPN + MFA로 인증된 관리자만 접근
    - 내부 관리 네트워크에서만 접근 가능
    - 관리 목적의 중계 서버
  근거: 내부 관리 전용 → Z4

결정 질문: "이 Bastion에 공개 인터넷에서 직접 접근할 수 있는가?"
  - Yes (Public IP 노출) → Z1
  - No (VPN 내부에서만) → Z4

주의: 많은 조직이 Bastion을 "관리 도구"라고 Z4에 넣지만,
      Public IP로 SSH가 열려 있다면 외부 노출 = Z1입니다.
      Zone은 목적이 아니라 노출 위치로 결정합니다.
```

### 사례 10: Database Read Replica — Z3 vs Z2

```yaml
판단 기준: "원본 데이터의 복제본인가, 서비스용 캐시인가?"

Read Replica in Data Zone (Z3, L5):
  역할: Primary DB의 읽기 부하 분산용 복제본
  특성:
    - Primary DB와 동일한 데이터 보유
    - 실시간 복제 (Replication Lag 최소화)
    - 민감 데이터가 그대로 포함됨 (PII, 금융 데이터)
    - Primary 장애 시 Failover 대상
    - 백업 정책 동일 적용
  근거: 원본과 동일한 민감 데이터 보유 → Z3
  예시: PostgreSQL Streaming Replica, MySQL Read Replica, RDS Read Replica

Read Replica as Service Cache (여전히 Z3):
  역할: API 서버에 가까운 읽기 전용 복제본
  특성:
    - 비록 "서비스에 가깝게" 배치하더라도
    - 원본 데이터의 완전한 복사본이므로
    - 동일한 보안 정책 필요 (암호화, 접근 제어, 감사)
  근거: 데이터의 민감도는 위치와 무관 → Z3

결정 결론: Read Replica는 항상 Z3
  이유:
    - "물리적으로 App 서버 가까이 배치"와 "Zone 분류"는 별개
    - Zone은 논리적 신뢰 경계이지 물리적 위치가 아님
    - 민감 데이터의 복제본은 원본과 동일한 보안 수준 필요
    - 네트워크 지연 최적화는 Zone이 아닌 인프라 배치로 해결

예외: Materialized View (요약/집계 데이터만 포함)
  - 원본 PII가 제거된 집계 데이터만 포함 → Z2 가능
  - 판단 기준: "이 데이터에 민감 정보가 포함되어 있는가?"
```

### 사례 11: DNS Server — Z1 vs Z4

```yaml
판단 기준: "외부에 서비스를 제공하는가, 내부 관리용인가?"

Public DNS (Z1, L2):
  역할: 외부 인터넷 사용자를 위한 도메인 해석
  특성:
    - 공개 인터넷에서 쿼리 수신 (UDP 53, TCP 53)
    - 회사 도메인의 Authoritative DNS
    - 공격 대상 (DNS Amplification, Cache Poisoning)
    - DNSSEC 적용 필요
  예시: Route 53 (Public Zone), Cloudflare DNS, BIND (External)
  근거: 외부 트래픽 직접 수신 → Z1

Internal DNS (Z4, L2):
  역할: 내부 네트워크의 서비스 디스커버리 및 이름 해석
  특성:
    - 내부 네트워크에서만 접근 가능
    - 내부 서비스 이름 해석 (*.internal.company.com)
    - Kubernetes CoreDNS, Active Directory DNS
    - 인프라 관리의 핵심 구성요소
  예시: Route 53 (Private Zone), CoreDNS, AD DNS
  근거: 내부 관리 인프라 → Z4

DNS SaaS (Z0B, L0):
  역할: 외부 DNS 관리 서비스
  특성:
    - 우리가 DNS 서버 인프라를 관리하지 않음
    - 계약 기반 (SLA 포함)
  예시: Cloudflare DNS (SaaS), AWS Route 53 (Hosted Service)
  근거: 외부 관리 서비스 → Z0B

결정 질문: "이 DNS 서버를 우리가 관리하는가?"
  - No → Z0B
  - Yes → "외부 인터넷에서 쿼리를 받는가?"
    - Yes → Z1
    - No → Z4
```

### 사례 12: Identity Provider — Z4 vs Z0B

```yaml
판단 기준: "우리가 IdP 인프라를 관리하는가?"

Self-hosted IdP (Z4, Cross-Layer):
  역할: 자체 운영 인증/인가 서비스
  특성:
    - 우리가 직접 서버 운영
    - 모든 내부 시스템의 인증 허브
    - 침해 시 전체 인프라에 영향
    - 최고 수준 보안 필요
  예시: Active Directory (On-prem), Keycloak, FreeIPA
  근거: 자체 관리 + 관리 인프라 → Z4
  Layer: Cross-Layer (모든 Layer의 인증 담당)

SaaS IdP (Z0B, L0):
  역할: 외부 인증 서비스 이용
  특성:
    - 우리가 IdP 인프라를 관리하지 않음
    - API/SAML/OIDC로 연동
    - 계약 기반 (SOC 2, ISO 27001)
    - SaaS 제공자의 SLA에 의존
  예시: Okta, Auth0, Azure AD (Cloud), Google Workspace
  근거: 외부 관리 서비스 → Z0B

결정 질문: "이 IdP의 서버를 우리가 직접 관리하는가?"
  - Yes → Z4
  - No → Z0B

주의: Azure AD가 "Active Directory"라는 이름이지만 SaaS이므로 Z0B입니다.
      On-prem Active Directory는 우리가 직접 관리하므로 Z4입니다.
      이름이 아니라 관리 주체로 판단합니다.
```

### 사례 13: Container Registry — Z4 vs Z3

```yaml
판단 기준: "이미지 저장소인가, 배포 파이프라인의 일부인가?"

Container Registry as Platform Service (Z4, L4):
  역할: CI/CD 파이프라인의 이미지 저장/배포
  특성:
    - CI/CD에서 빌드된 이미지를 Push
    - Kubernetes가 배포 시 이미지를 Pull
    - 이미지 스캐닝 (취약점 검사)
    - 배포 수명 주기의 핵심 구성요소
    - 이미지는 "배포 아티팩트"이지 "비즈니스 데이터"가 아님
  예시: Harbor, ECR, GCR, ACR, GitLab Container Registry
  근거: 플랫폼/배포 인프라 → Z4

결정 결론: Container Registry는 Z4
  이유:
    - "이미지를 저장한다"는 것이 "데이터 저장소(Z3)"를 의미하지 않음
    - 이미지는 배포 아티팩트이며, 비즈니스 데이터가 아님
    - CI/CD 파이프라인과 함께 관리 인프라에 속함
    - 접근 권한도 개발자/DevOps에 한정 (관리 목적)

예외: Container Registry SaaS
  - Docker Hub, Quay.io 등 외부 서비스 → Z0B
  - 우리가 관리하지 않는 외부 서비스이므로
```

### 사례 14: CI/CD Runner — Z4 vs Z2

```yaml
판단 기준: "코드를 실행하지만, 목적이 무엇인가?"

CI/CD Runner (Z4, L4):
  역할: 빌드, 테스트, 배포 자동화 실행
  특성:
    - 코드를 실행하지만, 비즈니스 로직이 아닌 빌드/테스트 목적
    - CI/CD 파이프라인의 구성요소
    - 관리/운영 자동화의 일부
    - 높은 권한 보유 (배포 권한, 시크릿 접근)
  예시: Jenkins Agent, GitLab Runner, GitHub Actions Runner
  근거: 관리/배포 목적 → Z4

결정 결론: CI/CD Runner는 항상 Z4
  이유:
    - "코드를 실행한다"와 "비즈니스 로직을 실행한다(Z2)"는 다름
    - Runner는 빌드/테스트/배포를 위해 코드를 실행하는 것이며
    - 이는 관리/운영 활동에 해당
    - Runner가 보유한 시크릿과 배포 권한을 고려하면 Z4 보안 수준 필요

주의: Runner가 실행하는 "코드"의 결과물(빌드된 앱)은 Z2에 배포됨.
      하지만 Runner 자체는 배포를 수행하는 관리 도구이므로 Z4.
      "실행하는 코드의 목적"이 아니라 "Runner 자체의 역할"로 판단.
```

### 사례 15: VPN Gateway — Z1 vs Z4

```yaml
판단 기준: "외부에 노출되는가?"

VPN Gateway (Z1, L2):
  역할: 외부 사용자/사이트의 보안 연결 진입점
  특성:
    - 공개 인터넷에 VPN 포트 노출 (UDP 500/4500, TCP 443)
    - 외부에서 내부 네트워크로의 암호화된 터널 제공
    - 인증 후 내부 접근 허용
    - 외부 공격에 직접 노출 (DDoS, Brute Force)
  예시: OpenVPN Server, WireGuard, AWS VPN Gateway, Cisco AnyConnect
  근거: 외부 인터넷에 직접 노출 → Z1

결정 결론: VPN Gateway는 Z1
  이유:
    - VPN의 "목적"은 관리 접근이지만
    - VPN Gateway의 "위치"는 외부에 직접 노출됨
    - Zone은 목적이 아니라 노출 위치/신뢰 경계로 결정
    - Bastion Host와 동일한 논리

구분:
  - VPN Gateway (물리적 진입점) → Z1 (외부 노출)
  - VPN 접속 후 도달하는 관리 시스템 → Z4 (관리 Zone)
  - VPN Client (사용자 디바이스) → Z5 (엔드포인트)

핵심: VPN은 Z5(엔드포인트) → Z1(VPN Gateway) → Z4(관리 시스템)으로
      이어지는 경로의 구성요소들이며, 각각 다른 Zone에 속합니다.
```

### Zone × Layer 교차 판단 기준

Zone과 Layer는 **독립적인 두 개의 차원**입니다. 하나의 구성요소에 대해 Zone과 Layer를 **각각 별도로** 판단해야 합니다.

```yaml
원칙: Zone과 Layer는 독립적으로 결정한다

Zone 판단 질문: "어떤 신뢰 경계에 있는가?"
  → 관리 주체, 노출 위치, 데이터 민감도로 결정

Layer 판단 질문: "기술 스택에서 어디에 있는가?"
  → 기능적 역할(물리/네트워크/컴퓨트/플랫폼/데이터/런타임/앱)으로 결정

두 판단은 서로 영향을 주지 않음:
  - Zone이 Z3이라고 Layer가 반드시 L5인 것은 아님
  - Layer가 L2라고 Zone이 반드시 Z1인 것은 아님
```

#### 교차 판단 예시

```yaml
Redis:
  캐시 역할:
    Zone: Z2 (서비스 Zone — 영구 데이터 아님)
    Layer: L6 (런타임 — 실행 중인 앱의 캐시)
    좌표: (L6, Z2)
  데이터 저장 역할:
    Zone: Z3 (데이터 Zone — 영구 데이터 보관)
    Layer: L5 (데이터 서비스 — 영구 저장소)
    좌표: (L5, Z3)
  판단 과정:
    1. Zone: "데이터가 사라지면 비즈니스 영향?" → Yes면 Z3, No면 Z2
    2. Layer: "영구 데이터를 저장하는가?" → Yes면 L5, No면 L6
    3. Zone과 Layer가 동시에 결정됨 — 이 경우 연동되지만 이는 우연이 아님
       Redis의 역할이 "영구 저장"이면 Zone과 Layer 모두 상위로 이동

API Gateway:
  외부 공개:
    Zone: Z1 (경계 — 외부 노출)
    Layer: L2 (네트워크 인프라 — 트래픽 라우팅)
    좌표: (L2, Z1)
  내부 라우터:
    Zone: Z2 (서비스 — 내부 전용)
    Layer: L2 (네트워크 인프라 — 여전히 트래픽 라우팅)
    좌표: (L2, Z2)
  판단 과정:
    1. Layer: "트래픽을 라우팅/필터링하는가?" → Yes → L2 (두 경우 모두)
    2. Zone: "외부에 직접 노출되는가?" → Yes면 Z1, No면 Z2
    3. Layer는 동일하지만 Zone이 다름 — 두 차원은 독립적

Elasticsearch:
  검색 엔진:
    Zone: Z2 (서비스 — 파생 데이터)
    Layer: L6 (런타임 — 검색 서비스 제공)
    좌표: (L6, Z2)
  로그 저장소:
    Zone: Z3 (데이터 — 원본 로그)
    Layer: L5 (데이터 서비스 — 영구 저장)
    좌표: (L5, Z3)
  판단 과정:
    1. Zone: "다른 곳에서 데이터 재생성 가능?" → Yes면 Z2, No면 Z3
    2. Layer: "영구 데이터를 저장하는가?" → Yes면 L5, No면 L6

Grafana:
  좌표: (Cross-Layer, Z4)
  판단 과정:
    1. Zone: "관리/운영/모니터링 목적인가?" → Yes → Z4
    2. Layer: "여러 레이어에 걸쳐 작동하는가?" → Yes → Cross-Layer
    3. Zone과 Layer가 완전히 독립적으로 결정됨

Kubernetes:
  좌표: (L6, Z2) 또는 (L6, Z3) 또는 (L4, Z4)
  판단 과정:
    1. K8s Worker Node (Pod 실행): Layer L6 (런타임), Zone은 Pod의 역할에 따라
       - API Pod → Z2, DB Pod → Z3
    2. K8s Control Plane (API Server, etcd): Layer L4 (플랫폼), Zone Z4 (관리)
    3. 동일 "Kubernetes"이지만 구성요소마다 좌표가 다름 — Archetype 적용

WAF:
  SaaS WAF:
    Zone: Z0B (외부 관리 서비스)
    Layer: L0 (외부 서비스)
    좌표: (L0, Z0B)
  Self-hosted WAF:
    Zone: Z1 (경계 — 외부 트래픽 필터링)
    Layer: L2 (네트워크 인프라 — 트래픽 필터링)
    좌표: (L2, Z1)
  판단 과정:
    1. "우리가 관리하는가?" → No면 (L0, Z0B), Yes면 다음
    2. Zone: "외부 노출?" → Yes → Z1
    3. Layer: "트래픽 필터링?" → Yes → L2
```

#### Zone × Layer 교차 판단 요약표

```
| 구성요소              | Zone 판단 기준          | Layer 판단 기준         | 좌표         |
|---------------------|----------------------|----------------------|-------------|
| Redis (캐시)         | 영구 데이터 아님 → Z2    | 런타임 캐시 → L6        | (L6, Z2)    |
| Redis (저장소)        | 영구 데이터 → Z3        | 데이터 서비스 → L5       | (L5, Z3)    |
| API GW (외부)        | 외부 노출 → Z1          | 네트워크 라우팅 → L2     | (L2, Z1)    |
| API GW (내부)        | 내부 전용 → Z2          | 네트워크 라우팅 → L2     | (L2, Z2)    |
| Elasticsearch (검색)  | 파생 데이터 → Z2        | 검색 서비스 → L6        | (L6, Z2)    |
| Elasticsearch (로그)  | 원본 데이터 → Z3        | 데이터 저장 → L5        | (L5, Z3)    |
| LLM (SaaS)          | 외부 관리 → Z0B         | 외부 서비스 → L0        | (L0, Z0B)   |
| LLM (자체)           | 내부 서비스 → Z2         | 비즈니스 로직 → L7      | (L7, Z2)    |
| WAF (SaaS)          | 외부 관리 → Z0B         | 외부 서비스 → L0        | (L0, Z0B)   |
| WAF (자체)           | 외부 노출 → Z1          | 네트워크 보안 → L2      | (L2, Z1)    |
| K8s Control Plane    | 관리 인프라 → Z4        | 플랫폼 서비스 → L4      | (L4, Z4)    |
| K8s Worker (API Pod) | 서비스 실행 → Z2        | 런타임 환경 → L6        | (L6, Z2)    |
| Grafana             | 관리/모니터링 → Z4      | 전 스택 모니터링 → Cross | (Cross, Z4) |
| VPN Gateway         | 외부 노출 → Z1          | 네트워크 장비 → L2      | (L2, Z1)    |
| Bastion (Public)    | 외부 노출 → Z1          | 네트워크 진입 → L2      | (L2, Z1)    |
| Bastion (VPN 내부)   | 관리 전용 → Z4          | 컴퓨트 인스턴스 → L3    | (L3, Z4)    |
```

#### 교차 판단 핵심 원칙

```yaml
원칙 1 — 독립 판단:
  Zone과 Layer는 각각의 질문에 독립적으로 답한다.
  Zone: "어떤 신뢰 경계에 있는가?"
  Layer: "기술 스택에서 어디에 있는가?"
  하나의 답이 다른 답을 결정하지 않는다.

원칙 2 — 역할이 좌표를 결정:
  제품명이 아니라 "이 인스턴스가 실제로 수행하는 역할"로 판단한다.
  같은 제품이라도 역할이 다르면 좌표가 다르다 (Archetype).

원칙 3 — 노출이 Zone을, 기능이 Layer를 결정:
  Zone: 관리 주체(우리/외부), 네트워크 노출 위치, 데이터 민감도
  Layer: 기능적 역할(라우팅/저장/실행/관리/비즈니스로직)

원칙 4 — 의심스러우면 보안 수준이 높은 쪽:
  Z2와 Z3 사이에서 모호하면 → Z3 (더 높은 보안)
  L5와 L6 사이에서 모호하면 → L5 (더 높은 데이터 보호)
  보안 정책은 나중에 완화할 수 있지만, 부족한 보안은 사고로 이어진다.

원칙 5 — 좌표가 먼저, 의미는 나중에:
  "이 구성요소에 어떤 정책이 필요한가"를 먼저 생각하고 좌표를 맞추지 말 것.
  좌표를 먼저 부여하고, 그 좌표에서 파생되는 정책은 나중에 결정한다.
  의미를 먼저 찾고 좌표를 만들려 하면 프레임워크가 왜곡된다.
```

---

## 🔐 Zero Trust 원칙 적용

### Zone 기반 Zero Trust

```yaml
원칙 1: 신뢰하지 말고, 항상 검증하라 (Never Trust, Always Verify)
  - Zone 내부라도 모든 연결 검증
  - Service-to-Service 인증 필수
  - Zone 0-B도 신뢰하지 말고 검증

원칙 2: 최소 권한 원칙 (Least Privilege)
  - Zone 간 통신은 필요한 최소한만 허용
  - 명시적 허용 목록 (Allowlist)
  - Zone 0-B 접근도 최소 권한

원칙 3: 마이크로 세그멘테이션 (Micro-Segmentation)
  - Zone 내부도 더 작은 세그먼트로 분리
  - 애플리케이션별 네트워크 격리
  - Zone 2 내 AI/ML 워크로드 격리

원칙 4: 지속적 모니터링 (Continuous Monitoring)
  - 모든 Zone의 트래픽 실시간 분석
  - 이상 징후 자동 탐지
  - Zone 0-B 사용량 및 비용 모니터링
```

---

## 📊 Zone별 모니터링 및 로깅

### 로그 수집 전략

```yaml
Zone 0-A (Untrusted External):
  수집: N/A (우리가 수집할 수 없음)
  대신: Zone 1에서 Zone 0-A로부터의 유입 트래픽 로깅
  분석: 위협 인텔리전스, 공격 패턴 분석

Zone 0-B (Trusted Partner):
  수집: API 호출 로그, 응답 시간, 에러율, 비용
  보존: 90일
  분석: 사용량 추적, 비용 최적화, SLA 모니터링

Zone 1 (Perimeter):
  수집: 모든 인바운드/아웃바운드 트래픽
  보존: 30일
  분석: 실시간 위협 탐지

Zone 2 (Application):
  수집: API 호출, 에러, 비즈니스 로직 실행
  보존: 90일
  분석: 에러 추적, 성능 분석

Zone 3 (Data):
  수집: 모든 데이터 접근, 쿼리, 변경 이력
  보존: 1년 이상
  분석: 감사, 이상 탐지

Zone 4 (Management):
  수집: 모든 관리 활동, 정책 변경, 접근 시도
  보존: 1년 이상
  분석: 실시간 + 일일 리뷰

Zone 5 (Endpoint):
  수집: 사용자 활동, 디바이스 접근
  보존: 180일
  분석: 사용자 행동 분석, 이상 탐지
```

---

## ✅ v2.0 변경 요약

### Zone 0 세분화

```yaml
이전 (v1.0):
  - Zone 0: External/Internet Zone (단일)
  - 모든 외부 요소를 하나로 통합

현재 (v2.0):
  - Zone 0-A: Untrusted External (0% 신뢰)
  - Zone 0-B: Trusted Partner (10% 신뢰)
  - 보안 정책 차별화 가능
```

### Zone 모델 확장

```yaml
v1.0: 6-Zone Model (Zone 0-5)
v2.0: 7-Zone Model (Zone 0-A, 0-B, 1-5)
```

### AI/ML 통합

```yaml
추가 구성요소:
  - Zone 0-B: Public LLM API (OpenAI, Claude)
  - Zone 2: Self-hosted LLM, AI Agent
  - Zone 3: Vector Database (pgvector, Weaviate)
```

---

## 🔗 관련 문서

- [Zone 0-A: Untrusted External](./Zone_0-A_Untrusted.md)
- [Zone 0-B: Trusted Partner](./Zone_0-B_Trusted_Partner.md)
- [Zone 1: Perimeter Zone](./Zone_1_Perimeter.md)
- [Zone 2: Application Zone](./Zone_2_Application.md)
- [Zone 3: Data Zone](./Zone_3_Data.md)
- [Zone 4: Management Zone](./Zone_4_Management.md)
- [Zone 5: Endpoint Zone](./Zone_5_Endpoint.md)

---

## 📞 변경 이력

**v2.0.0 (2025-01-20)** - Zone 0 세분화:
- ✅ Zone 0 → 0-A (Untrusted) + 0-B (Trusted Partner) 세분화
- ✅ 7-Zone Model 확립
- ✅ AI/ML 워크로드 Zone 배치 가이드 추가
- ✅ Zone 0-B 보안 정책 및 분류 기준 추가
- ✅ Zone 간 트래픽 흐름 업데이트

**v1.0.0 (2025-01-05)** - 초기 작성:
- 6-Zone Model 정의
- Zone별 보안 정책
- Zone 간 통제 규칙

---

**문서 끝**
